<html>

<head>
</head>
<script>

var myscan;
var myflag = 0;

function doScan()
{
   var xhr;
   var params = "0";
   xhr = new XMLHttpRequest();
   xhr.onreadystatechange = handleStateChange;
   xhr.open("POST", '/checkscan/', true);
   xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
   xhr.setRequestHeader("Content-length", params.length);
   xhr.setRequestHeader("Connection", "close");
   xhr.send(params);
   function handleStateChange() {
       if (xhr.readyState == 4 &&  xhr.status == 200) {
           if (xhr.responseText == 'G') {
               if (myflag == 0) {
                   myscan = window.setInterval(getNode, 1000);
                   myflag = 1;
               }
           }
           if (xhr.responseText == 'S') {
               window.clearInterval(myscan);
               myflag = 0;
           }
       }
   }
}


function getNode(address, name)
{
   var xhr;
   var params = "address="+address+"&name="+name;
   xhr = new XMLHttpRequest();
   xhr.onreadystatechange = handleStateChange;
   xhr.open("POST", '/refreshnode/', true);
   xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
   xhr.setRequestHeader("Content-length", params.length);
   xhr.setRequestHeader("Connection", "close");
   xhr.send(params);
   function handleStateChange() {
       if (xhr.readyState == 4 &&  xhr.status == 200) {
           var element = document.getElementById('textblock');
           element.innerHTML = xhr.responseText;
       }
   doScan();
   }

}



function setNotch(notchNum)
{
  var macaddr   = document.getElementById('address').value;
  var notchlow  = document.getElementById('notch-'+notchNum+'-low').value;
  var notchhigh = document.getElementById('notch-'+notchNum+'-high').value;
  var notchvalue = document.getElementById('notch-'+notchNum+'-output').value;
  alert(macaddr + " " + notchlow + " " + notchhigh + " " + notchvalue);
}


function getNotches(id, name)
{
    var form = document.createElement("form");
    form.setAttribute("method", "post");
    form.setAttribute("action", '/notchtable/');
                                                 
    var hf = document.createElement("input");
    hf.setAttribute("type", "hidden");
    hf.setAttribute("name", "address");
    hf.setAttribute("value", id);
    form.appendChild(hf);

    hf = document.createElement("input");
    hf.setAttribute("type", "hidden");
    hf.setAttribute("name", "name");
    hf.setAttribute("value", name);
    form.appendChild(hf);

    document.body.appendChild(form);
    form.submit();
}

function setHome()
{
   window.location.href = "/";
}

</script>
<style>
body {
  font-family:Arial;
  background-color:#bbbbbb;
}

.myinput {
   text-align:right;
   font-size:18px;
   width:50px;
   height:34px;
   padding-right:4px;
   border-radius:6px;
   margin-bottom:4px;
}

P.pageblock {
  margin-left: auto;
  margin-right: auto;
  width:400px;
}

.theButton {
  background-color:#ededed;
  -moz-border-radius:6px;
  -webkit-border-radius:6px;
  border-radius:6px;
  border:1px solid eeeeee;
  height:34px;
  cursor:pointer;
  color:#555555;
  font-family:Arial;
  font-size:15px;
  font-weight:bold;
  padding:0px 14px;
  text-decoration:none;
  text-shadow:0px 1px 0px #ffffff;
} 

table.center {
  margin-left: auto;
  margin-right: auto;
}

</style>
<body>

  <div style="text-align:center;border:1px;">

    <div style="font-size:32px;padding-top:20px;">{{ name }}</div>
    <div style="font-size:12px;">{{ address }}</div>                                                             
    <input type="hidden" id="address" value="{{ address }}">
    
    <div id="textblock">
              &nbsp;
    </div>
 
 </div>
  
</body>
<script>
window.onload = doScan();
document.body.style.zoom = 2.0;
</script>
</html>
